<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Win32)">
	<META NAME="AUTHOR" CONTENT="Daniel Dunn">
	<META NAME="CREATED" CONTENT="20120302;17051353">
	<META NAME="CHANGEDBY" CONTENT="Daniel Black">
	<META NAME="CHANGED" CONTENT="20120531;19240520">
	<STYLE TYPE="text/css">
	<!--
		@page { margin: 0.79in }
		P { margin-bottom: 0.08in }
		H1 { margin-bottom: 0.08in }
		H1.western { font-family: "Arial", sans-serif; font-size: 16pt }
		H1.cjk { font-family: "Microsoft YaHei"; font-size: 16pt }
		H1.ctl { font-family: "Mangal"; font-size: 16pt }
		H2 { margin-bottom: 0.08in }
		H2.western { font-family: "Arial", sans-serif; font-size: 14pt; font-style: italic }
		H2.cjk { font-family: "Microsoft YaHei"; font-size: 14pt; font-style: italic }
		H2.ctl { font-family: "Mangal"; font-size: 14pt; font-style: italic }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1 CLASS="western">How to write an OpenFortune File:</H1>
<H2 CLASS="western">Introduction:</H2>
<P><I><B>OpenFortune</B></I> is a more versatile replacement for the
UNIX <I>fortune</I> utility.</P>
<P>You can use it as a direct replacement, virtual dice roller,name
generator, short story maker,</P>
<P>and a lot of other things that involve generating random text.</P>
<P><BR><BR>
</P>
<H2 CLASS="western">Mad Libs(TM):</H2>
<P>If you have ever played mad libs you know how <B>OpenFortune</B>
works. 
</P>
<P>Start with a list of possible patterns, then fill in the blanks!</P>
<P>For example, <B>OpenFortune</B> is packaged with a file
&quot;<B>MinimalExample.frtn</B>&quot;.</P>
<P>It contains one possible pattern: &quot;I went to the store and
bought -<I><B>Object</B></I> and -<I><B>2Object</B></I>&quot;</P>
<P>The <B>OpenFortune</B> program knows to replace -<I><B>Object</B></I>
with one of a list of words or phrases from a list 
</P>
<P>of objects contained in the same file. It then replaces -<I><B>2Object</B></I>
with another object different then the first. More about that later.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">Extra Features:</H2>
<P>In addition to Mad Libs style replacements, a file can also define
&quot;Introductions&quot; and &quot;Endings&quot;.</P>
<P>A random Introduction and ending will be appended to the beginning
and end of the output.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">JSON File:</H2>
<P>A .frtn file is structured as a JSON file, which is a standard
format for all kinds of structured data. 
</P>
<P>The JSON file must contain:</P>
<UL>
	<LI><P>A number called Recursion, Which lets you run the program
	multiple times on the pattern</P>
	<LI><P>A list of introductions and a list of endings</P>
	<LI><P>A list of starting patterns</P>
	<LI><P>A list of parts of speech, And each part of speech must have
	A list of words or phrases in that category</P>
	<LI><P>Another list of parts of speech, called Macro, <SPAN STYLE="font-style: normal">guaranteed</SPAN>
	to run <I>after</I> the first list</P>
</UL>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P>Now lets look at the included MinimumExample.frtn file on the next
page. Note what is done(we will look at the more advanced parts
later):</P>
<UL>
	<LI><P>We define two possible introductions</P>
	<LI><P>We declare the only possible ending to be blank</P>
	<LI><P>We define a basic pattern template</P>
	<LI><P>We define a part of speech keyword called <I><B>-Object</B></I></P>
</UL>
<P STYLE="margin-bottom: 0in; font-weight: normal"><FONT FACE="Arial, sans-serif"><I>MinimalExample.frtn</I></FONT></P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			<FONT FACE="Arial, sans-serif">{</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			    <FONT FACE="Arial, sans-serif">&quot;<I><B>Recursion</B></I>&quot;
			: <I><B>1</B></I>,</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			    <FONT FACE="Arial, sans-serif">&quot;<I><B>Introductions</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">[</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			            <FONT FACE="Arial, sans-serif">&quot;I wrote a letter
			saying &quot;,</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			            <FONT FACE="Arial, sans-serif">&quot;I should write a
			letter saying &quot;</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">],</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			    <FONT FACE="Arial, sans-serif">&quot;<I><B>Endings</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">[</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			            <FONT FACE="Arial, sans-serif">&quot;&quot;</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">],</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			    <FONT FACE="Arial, sans-serif">&quot;<I><B>Patterns</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">[</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			            <FONT FACE="Arial, sans-serif">&quot;I went to the
			store and bought -Object and -2Object.&quot;</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">],</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			    <FONT FACE="Arial, sans-serif">&quot;<I><B>Parts</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">{</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			            <FONT FACE="Arial, sans-serif">&quot;-<I><B>Object</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                <FONT FACE="Arial, sans-serif">[</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                    <FONT FACE="Arial, sans-serif">&quot;a rug&quot;,</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                    <FONT FACE="Arial, sans-serif">&quot;a lamp&quot;,</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                    <FONT FACE="Arial, sans-serif">&quot;a
			lampshade&quot;</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                <FONT FACE="Arial, sans-serif">]</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">},</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			    <FONT FACE="Arial, sans-serif">&quot;<I><B>Macro</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">{</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			            <FONT FACE="Arial, sans-serif">&quot;-<I><B>2Object</B></I>&quot;:</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                <FONT FACE="Arial, sans-serif">[</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                    <FONT FACE="Arial, sans-serif">&quot;-Object&quot;</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			                <FONT FACE="Arial, sans-serif">]</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			        <FONT FACE="Arial, sans-serif">}</FONT></P>
			<P STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
			<BR>
			</P>
			<P ALIGN=LEFT STYLE="font-style: normal; font-weight: normal"><FONT FACE="Arial, sans-serif">}</FONT></P>
		</TD>
	</TR>
</TABLE>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal">
<BR>
</P>
<P STYLE="margin-bottom: 0in">It is easy to get a sense of the
tree-like structure of the data. Any OpenFortune file will look like
this, only with more Parts of speech, Macros, Patterns,Endings, and
Introductions.</P>
<P STYLE="margin-bottom: 0in">Note that an keyword should never be a
prefix of another. -SmellyThing is a prefix of -SmellyThingILike. So
change it to -LikeableSmellyThing.</P>
<H2 CLASS="western">What's With this -2Object stuff?</H2>
<P>OpenFortune operates in several &quot;rounds&quot;. the number of
rounds is defined in the recursion parameter.</P>
<P>0 recursion is one round. In the first round, all instances of the
keyword -<I><B>Object</B></I> get replaced with</P>
<P>something from the object list. But all the <I><B>-Object</B></I>s
are always the same in a round. 
</P>
<P>This is because If we had a pattern:</P>
<P> 
</P>
<P ALIGN=CENTER><I>&quot;I bought an -Noun! It is the best -Noun I
have ever owned&quot; </I>
</P>
<P><BR><BR>
</P>
<P>We would naturally want both -<I><B>Noun</B></I> instances to be
the same word.</P>
<P>But when you want different words, that is where the rounds come
in. In the first round of the example:</P>
<P><BR><BR>
</P>
<P ALIGN=CENTER>&ldquo;<I>I went to the store and bought -<B>Object</B>
and -<B>2Object</B>&rdquo;</I></P>
<P><BR><BR>
</P>
<P>We replace <I>-</I><I><B>Object</B></I><I> </I>with the first word
or phrase, 
</P>
<P>AND we replace -<I><B>2Object</B></I> with the keyword &quot;-<I><B>Object</B></I>&quot;.
<I>then</I> in <I>round 2 </I>we replace &quot;-<I><B>Object</B></I>&quot;(which
used to be -<I><B>2Object</B></I>) with the second word or phrase.</P>
<P>The reason the replacement of &quot;-<I><B>2Object</B></I>&quot;
with &quot;-<I><B>Object</B></I>&quot; is defined in &quot;<I><B>Macro</B></I>&quot;,
not &quot;<I><B>Parts</B></I>&quot; is that &quot;<I><B>Macro</B></I>&quot;
is guaranteed to run after &quot;<I><B>Parts</B></I>&quot;. This way
we can be sure that -2Object will not get replaced too early. The
order of replacements is not guaranteed beyond <I><B>Macro </B></I><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">running
after </SPAN></SPAN><I><B>Parts.</B></I></P>
<P>The reason that we must name the macro -<I><B>2Object</B></I> and
not -<I><B>Object2</B></I> is that -<I><B>Object2</B></I> contains
the keyword &quot;-<I><B>Object</B></I>&quot; and so the first part
might be replaced before the macro phase even starts, defeating the
purpose and leaving a <I><B>2</B></I> behind. This is because the
replacements are simple dumb string replacements.</P>
<P>If you need more than 2 of a part of speech, you may extend the
concept by having a -3Object. This is guaranteed to work  in the C
version because the C version parses replacements in the order they
are listed in the file. The C version should be the most common
version so this should usually work.</P>
<H2 CLASS="western">Style and Artistry:</H2>
<P>Besides the technical challenges, there are a number of issues to
consider.</P>
<P>Try not to worry too much about how capitalization will work in
the output. The program will automatically fix most capitalization
errors. The only things you need to capitalize are words that are
always capitalized no matter where they are like 'King' and
'President'.</P>
<P>You may have some issues with plural nouns. To avoid this, Have
two separate keywords for plurans and singulars to avoid things like
&ldquo;the big trees is big&rdquo; or what not.</P>
<P>Don't limit yourself to catergories based on standard parts of
speech. You may just want a catergory for&rdquo;Things you can do on
fridays&rdquo; or some such.</P>
<P>Take care with pronouns and the like. Otherwise you might wind up
with &ldquo;The King puts on her favorite shirt&rdquo;. Avoid
patterns involving 'him','her', etc, Or have separate lists of male
and females.</P>
</BODY>
</HTML>